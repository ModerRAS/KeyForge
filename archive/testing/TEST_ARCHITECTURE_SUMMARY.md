# KeyForge æµ‹è¯•æ¶æ„å®ç°æ€»ç»“

## ğŸ¯ å®ç°æ¦‚è§ˆ

æˆ‘å·²ç»ä¸ºKeyForgeé¡¹ç›®è®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ª**ç®€åŒ–ä¸”å®ç”¨**çš„æµ‹è¯•æ¶æ„ï¼Œé¿å…äº†è¿‡åº¦å¤æ‚åŒ–ï¼Œä¸“æ³¨äºé¡¹ç›®çš„å®é™…éœ€æ±‚ã€‚

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶ç»“æ„

```
KeyForge/
â”œâ”€â”€ test-architecture.md                          # æµ‹è¯•æ¶æ„è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ run-tests-simple.sh                           # ç®€åŒ–ç‰ˆæµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ .github/workflows/tests.yml                   # GitHub Actions CIé…ç½®
â”œâ”€â”€ KeyForge.Tests/
â”‚   â”œâ”€â”€ test-config.json                          # æµ‹è¯•é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ quality-gate.yml                          # è´¨é‡é—¨ç¦é…ç½®
â”‚   â”œâ”€â”€ Support/                                  # æµ‹è¯•æ”¯æŒç±»
â”‚   â”‚   â”œâ”€â”€ TestConfiguration.cs                   # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ TestFixtures.cs                       # æµ‹è¯•æ•°æ®å·¥å‚
â”‚   â”‚   â”œâ”€â”€ MockHelpers.cs                        # Mockè¾…åŠ©æ–¹æ³•
â”‚   â”‚   â””â”€â”€ TestBase.cs                          # æµ‹è¯•åŸºç±»
â”‚   â””â”€â”€ Tests/                                    # æµ‹è¯•æ–‡ä»¶
â”‚       â”œâ”€â”€ Unit/Domain/ScriptTests.cs           # é¢†åŸŸæ¨¡å‹å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ Unit/Core/ScriptPlayerTests.cs       # æ ¸å¿ƒåŠŸèƒ½å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ Integration/ScriptServiceIntegrationTests.cs # é›†æˆæµ‹è¯•
â”‚       â”œâ”€â”€ Performance/ScriptExecutionPerformanceTests.cs # æ€§èƒ½æµ‹è¯•
â”‚       â””â”€â”€ EndToEnd/ScriptLifecycleEndToEndTests.cs # ç«¯åˆ°ç«¯æµ‹è¯•
```

## ğŸ› ï¸ æ ¸å¿ƒç»„ä»¶

### 1. æµ‹è¯•é…ç½®ç®¡ç†
- **TestConfiguration.cs**: ç»Ÿä¸€çš„é…ç½®è¯»å–
- **test-config.json**: æµ‹è¯•ç¯å¢ƒé…ç½®
- **quality-gate.yml**: è´¨é‡é—¨ç¦æ ‡å‡†

### 2. æµ‹è¯•æ•°æ®ç®¡ç†
- **TestFixtures.cs**: æµ‹è¯•æ•°æ®å·¥å‚
- **MockHelpers.cs**: Mockå¯¹è±¡åˆ›å»º
- **TestData/**: æµ‹è¯•æ•°æ®æ–‡ä»¶ç›®å½•

### 3. æµ‹è¯•æ”¯æŒåŸºç¡€è®¾æ–½
- **TestBase.cs**: æµ‹è¯•åŸºç±»å’ŒæŠ¥å‘Šç”Ÿæˆ
- **ç®€åŒ–ç‰ˆæµ‹è¯•è„šæœ¬**: å¿«é€Ÿæµ‹è¯•æ‰§è¡Œ
- **GitHub Actions**: è‡ªåŠ¨åŒ–CI/CD

## ğŸ¯ æµ‹è¯•æ¶æ„ç‰¹ç‚¹

### ç®€åŒ–å®ç”¨
- **é™ä½è¦†ç›–ç‡ç›®æ ‡**: ä»80%é™ä½åˆ°60-70%
- **å‡å°‘æµ‹è¯•æ¡†æ¶**: åªä½¿ç”¨å¿…è¦çš„å·¥å…·
- **ä¼˜åŒ–æ‰§è¡Œé€Ÿåº¦**: æµ‹è¯•æ‰§è¡Œæ—¶é—´æ§åˆ¶åœ¨2åˆ†é’Ÿå†…
- **èšç„¦æ ¸å¿ƒ**: ä¸“æ³¨äºå…³é”®ä¸šåŠ¡è·¯å¾„æµ‹è¯•

### åˆ†å±‚æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯• (60%)**: Domainå±‚ã€Coreå±‚ã€å·¥å…·ç±»
- **é›†æˆæµ‹è¯• (25%)**: æœåŠ¡äº¤äº’ã€æ•°æ®æŒä¹…åŒ–
- **ç«¯åˆ°ç«¯æµ‹è¯• (10%)**: å®Œæ•´ç”Ÿå‘½å‘¨æœŸ
- **æ€§èƒ½æµ‹è¯• (5%)**: å“åº”æ—¶é—´å’Œå†…å­˜ä½¿ç”¨

### é«˜è´¨é‡æµ‹è¯•ä»£ç 
- **æ¸…æ™°çš„å‘½å**: Scenario_ExpectedResult_Condition
- **å®Œæ•´çš„æ–­è¨€**: éªŒè¯æ‰€æœ‰é¢„æœŸç»“æœ
- **é”™è¯¯å¤„ç†**: æµ‹è¯•å¼‚å¸¸æƒ…å†µ
- **æ€§èƒ½ç›‘æ§**: èµ„æºä½¿ç”¨ç›‘æ§

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./run-tests-simple.sh

# ä½¿ç”¨dotnetå‘½ä»¤
dotnet test KeyForge.Tests --configuration Release
```

### ç”ŸæˆæŠ¥å‘Š
```bash
# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
./run-tests-simple.sh

# æŸ¥çœ‹æŠ¥å‘Š
open TestResults/index.html
```

### æ·»åŠ æ–°æµ‹è¯•
```csharp
// 1. é€‰æ‹©åˆé€‚çš„æµ‹è¯•ç±»å‹
// 2. ä½¿ç”¨TestFixturesåˆ›å»ºæµ‹è¯•æ•°æ®
// 3. ä½¿ç”¨MockHelpersåˆ›å»ºMockå¯¹è±¡
// 4. ç»§æ‰¿TestBaseè·å¾—æµ‹è¯•æ”¯æŒ
// 5. éµå¾ªAAAæ¨¡å¼ç¼–å†™æµ‹è¯•
```

## ğŸ“Š è´¨é‡æŒ‡æ ‡

### ä»£ç è´¨é‡
- **ä»£ç è¦†ç›–ç‡**: 60-70%
- **æµ‹è¯•é€šè¿‡ç‡**: 100%
- **åœˆå¤æ‚åº¦**: < 10
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: < 2åˆ†é’Ÿ

### æ€§èƒ½æŒ‡æ ‡
- **å“åº”æ—¶é—´**: < 1ç§’
- **å†…å­˜ä½¿ç”¨**: < 50MB
- **å¹¶å‘å¤„ç†**: æ”¯æŒå¹¶è¡Œæ‰§è¡Œ

## ğŸš€ ä¸åŸæ¶æ„å¯¹æ¯”

### åŸæ¶æ„é—®é¢˜
- **è¿‡åº¦å¤æ‚**: ä¼ä¸šçº§æ¶æ„ä¸é€‚åˆæŒ‰é”®è„šæœ¬å·¥å…·
- **æŠ€æœ¯æ ˆè¿‡å¤š**: ä½¿ç”¨äº†å¤ªå¤šä¸å¿…è¦çš„æ¡†æ¶
- **ç›®æ ‡è¿‡é«˜**: 80%è¦†ç›–ç‡å¯¹äºè¿™ç§å·¥å…·ä¸ç°å®
- **ç»´æŠ¤æˆæœ¬**: å¤æ‚çš„æ¶æ„å¢åŠ ç»´æŠ¤è´Ÿæ‹…

### æ–°æ¶æ„ä¼˜åŠ¿
- **ç®€åŒ–å®ç”¨**: ä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
- **å¿«é€Ÿåé¦ˆ**: æµ‹è¯•æ‰§è¡Œé€Ÿåº¦å¿«
- **æ˜“äºç»´æŠ¤**: æ¸…æ™°çš„ä»£ç ç»“æ„
- **æˆæœ¬æ•ˆç›Š**: å¹³è¡¡äº†è´¨é‡å’Œæ•ˆç‡

## ğŸ‰ å…³é”®æ”¹è¿›

### 1. ç®€åŒ–æµ‹è¯•ç›®æ ‡
- é™ä½è¦†ç›–ç‡è¦æ±‚
- å‡å°‘æµ‹è¯•æ•°é‡
- èšç„¦æ ¸å¿ƒåŠŸèƒ½

### 2. ä¼˜åŒ–æŠ€æœ¯æ ˆ
- åªä½¿ç”¨å¿…è¦çš„æµ‹è¯•æ¡†æ¶
- ç®€åŒ–é…ç½®æ–‡ä»¶
- ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œ

### 3. æ”¹è¿›å¼€å‘ä½“éªŒ
- æä¾›å®Œæ•´çš„æµ‹è¯•æ”¯æŒç±»
- ç®€åŒ–æµ‹è¯•ç¼–å†™æµç¨‹
- è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ

### 4. å¢å¼ºå®ç”¨æ€§
- æä¾›å®é™…çš„ä½¿ç”¨ç¤ºä¾‹
- è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜
- è‡ªåŠ¨åŒ–CI/CDæ”¯æŒ

## ğŸ“ˆ åç»­å»ºè®®

### 1. æŒç»­æ”¹è¿›
- æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´æµ‹è¯•ç­–ç•¥
- å®šæœŸå®¡æŸ¥å’Œä¼˜åŒ–æµ‹è¯•ä»£ç 
- ç›‘æ§æµ‹è¯•æ‰§è¡Œæ—¶é—´å’Œè¦†ç›–ç‡

### 2. å›¢é˜ŸåŸ¹è®­
- å­¦ä¹ æµ‹è¯•æœ€ä½³å®è·µ
- æŒæ¡æµ‹è¯•æ¡†æ¶ä½¿ç”¨
- ç†è§£æµ‹è¯•æ¶æ„è®¾è®¡

### 3. å·¥å…·ä¼˜åŒ–
- æ ¹æ®éœ€è¦æ·»åŠ æ–°çš„æµ‹è¯•å·¥å…·
- ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæµç¨‹
- æ”¹è¿›æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

## ğŸ¯ æ€»ç»“

è¿™ä¸ªæµ‹è¯•æ¶æ„æˆåŠŸåœ°å°†å¤æ‚çš„æµ‹è¯•éœ€æ±‚ç®€åŒ–ä¸ºå®ç”¨çš„è§£å†³æ–¹æ¡ˆï¼š

- **âœ… å®Œæ•´çš„æµ‹è¯•è¦†ç›–**: ä»å•å…ƒæµ‹è¯•åˆ°ç«¯åˆ°ç«¯æµ‹è¯•
- **âœ… é«˜è´¨é‡çš„æµ‹è¯•ä»£ç **: æ¸…æ™°ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•
- **âœ… å¼ºå¤§çš„æµ‹è¯•åŸºç¡€è®¾æ–½**: å·¥å‚æ¨¡å¼ã€æ¨¡æ‹Ÿå¯¹è±¡ã€æ–­è¨€åº“
- **âœ… ç®€åŒ–çš„æ‰§è¡Œæµç¨‹**: è„šæœ¬åŒ–çš„æµ‹è¯•æ‰§è¡Œå’ŒæŠ¥å‘Šç”Ÿæˆ
- **âœ… è‡ªåŠ¨åŒ–æ”¯æŒ**: GitHub Actionsé›†æˆ

é€šè¿‡è¿™ä¸ªæµ‹è¯•æ¶æ„ï¼Œå›¢é˜Ÿå¯ä»¥ï¼š
- ç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§
- å¿«é€Ÿå‘ç°å’Œä¿®å¤é—®é¢˜
- ç›‘æ§ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§
- æ”¯æŒæŒç»­é›†æˆå’Œéƒ¨ç½²
- æé«˜å¼€å‘æ•ˆç‡å’Œä¿¡å¿ƒ

æµ‹è¯•æ¶æ„å·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥ç«‹å³ä½¿ç”¨ï¼ğŸš€